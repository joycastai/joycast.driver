# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å —Ñ–æ—Ä–∫–∞ BlackHole –Ω–∞ —Å—É–±–º–æ–¥—É–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥

## –ó–∞—á–µ–º –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å?

–¢–µ–∫—É—â–∏–π –ø–æ–¥—Ö–æ–¥ (—Ñ–æ—Ä–∫ BlackHole) –∏–º–µ–µ—Ç —Å–µ—Ä—å–µ–∑–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:

- üî¥ **–°–ª–æ–∂–Ω–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** - –Ω—É–∂–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –º–µ—Ä–∂–∏—Ç—å upstream –∏–∑–º–µ–Ω–µ–Ω–∏—è
- üî¥ **–õ–∏—Ü–µ–Ω–∑–∏–æ–Ω–Ω—ã–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏** - GPL-3.0 –æ—Ç BlackHole —Å–º–µ—à–∏–≤–∞–µ—Ç—Å—è —Å –Ω–∞—à–µ–π –ª–∏—Ü–µ–Ω–∑–∏–µ–π  
- üî¥ **–†–∏—Å–∫ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤** –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è—Ö BlackHole
- üî¥ **–°–º–µ—à–∞–Ω–Ω–∞—è –∫–æ–¥–æ–≤–∞—è –±–∞–∑–∞** - JoyCast –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–º–µ—à–∞–Ω–∞ —Å BlackHole

–ù–æ–≤—ã–π –ø–æ–¥—Ö–æ–¥ (—Å—É–±–º–æ–¥—É–ª—å) —Ä–µ—à–∞–µ—Ç –≤—Å–µ —ç—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã:

- ‚úÖ **–ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ** - BlackHole –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–µ—Ç—Ä–æ–Ω—É—Ç—ã–º
- ‚úÖ **–õ–µ–≥–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - `git submodule update`
- ‚úÖ **–ß–µ—Ç–∫–∏–µ –ª–∏—Ü–µ–Ω–∑–∏–∏** - GPL –¥–ª—è BlackHole, MIT –¥–ª—è JoyCast
- ‚úÖ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞**

## –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –°–æ–∑–¥–∞–π –Ω–æ–≤—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
mkdir joycast.driver.new
cd joycast.driver.new
git init

# –î–æ–±–∞–≤—å BlackHole –∫–∞–∫ —Å—É–±–º–æ–¥—É–ª—å
git submodule add https://github.com/ExistentialAudio/BlackHole.git BlackHole
```

### 2. –°–æ–∑–¥–∞–π —Å—Ç—Ä—É–∫—Ç—É—Ä—É

```bash
mkdir -p configs assets scripts docs releases
```

### 3. –ü–µ—Ä–µ–Ω–µ—Å–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

–°–æ–∑–¥–∞–π —Ñ–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

**configs/joycast_prod.env:**
```bash
DRIVER_NAME="JoyCast"
BUNDLE_ID="com.joycast.virtualmic"
DEVICE_NAME="JoyCast Virtual Microphone"
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```

**configs/joycast_dev.env:**
```bash
DRIVER_NAME="JoyCast Dev"  
BUNDLE_ID="com.joycast.virtualmic.dev"
DEVICE_NAME="JoyCast Dev Virtual Microphone"
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
```

### 4. –°–æ–∑–¥–∞–π —Å–∫—Ä–∏–ø—Ç—ã —Å–±–æ—Ä–∫–∏

**scripts/build_driver.sh** - –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏
**scripts/install_driver.sh** - —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏
**configs/build_utils.sh** - —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–±–æ—Ä–∫–∏

### 5. –ü–µ—Ä–µ–Ω–µ—Å–∏ —Ä–µ—Å—É—Ä—Å—ã

```bash
# –°–∫–æ–ø–∏—Ä—É–π JoyCast-—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã
cp old_repo/BlackHole/JoyCast.icns assets/
cp old_repo/VERSION .
cp old_repo/LICENSE .
```

### 6. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π

```bash
# –°–æ–±–µ—Ä–∏ dev –≤–µ—Ä—Å–∏—é
./scripts/build_driver.sh dev

# –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
ls -la build/
plutil -p build/JoyCast\ Dev.driver/Contents/Info.plist
```

### 7. –ù–∞—Å—Ç—Ä–æ–π CI/CD

–û–±–Ω–æ–≤–∏ GitHub Actions –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å—É–±–º–æ–¥—É–ª—è–º–∏:

```yaml
- name: Checkout with submodules
  uses: actions/checkout@v3
  with:
    submodules: recursive

- name: Build driver
  run: ./scripts/build_driver.sh prod
```

## –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø–æ–¥—Ö–æ–¥–æ–≤

| –ê—Å–ø–µ–∫—Ç | –§–æ—Ä–∫ (—Å—Ç–∞—Ä—ã–π) | –°—É–±–º–æ–¥—É–ª—å (–Ω–æ–≤—ã–π) |
|--------|---------------|-------------------|
| –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ BlackHole | `git merge upstream/master` + –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã | `git submodule update` |
| –õ–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ | –°–º–µ—à–∞–Ω–Ω–æ–µ GPL/MIT | –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ |
| –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ | –ü–µ—Ä–µ–º–µ—à–∞–Ω–æ | –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ |
| –†–∏—Å–∫ –æ—à–∏–±–æ–∫ | –í—ã—Å–æ–∫–∏–π | –ù–∏–∑–∫–∏–π |
| –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–∏–∑–º | –°—Ä–µ–¥–Ω–∏–π | –í—ã—Å–æ–∫–∏–π |

## –ß—Ç–æ –º–µ–Ω—è–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞

### –ë—ã–ª–æ (—Ñ–æ—Ä–∫):
```bash
git clone https://github.com/joycast/joycast.driver.git
cd joycast.driver
./build_joycast_driver.sh dev
```

### –°—Ç–∞–ª–æ (—Å—É–±–º–æ–¥—É–ª—å):
```bash
git clone --recursive https://github.com/joycast/joycast.driver.git
cd joycast.driver
./scripts/build_driver.sh dev
```

## –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ BlackHole

### –ë—ã–ª–æ (—Å–ª–æ–∂–Ω–æ):
```bash
git remote add upstream https://github.com/ExistentialAudio/BlackHole.git
git fetch upstream
git merge upstream/master  # —á–∞—Å—Ç–æ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã!
# —Ä–∞–∑—Ä–µ—à–∏—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã...
git commit
```

### –°—Ç–∞–ª–æ (–ø—Ä–æ—Å—Ç–æ):
```bash
cd BlackHole
git fetch origin
git checkout v0.6.2  # –Ω–æ–≤–∞—è –≤–µ—Ä—Å–∏—è
cd ..
git add BlackHole
git commit -m "Update BlackHole to v0.6.2"
```

## –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ú–∏–≥—Ä–∏—Ä—É–π –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ** - —Å–Ω–∞—á–∞–ª–∞ –Ω–∞—Å—Ç—Ä–æ–π –Ω–æ–≤—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π
2. **–°–æ—Ö—Ä–∞–Ω–∏ —Å—Ç–∞—Ä—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π** - –∫–∞–∫ backup –Ω–∞ –≤—Ä–µ–º—è
3. **–û–±–Ω–æ–≤–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –¥–ª—è –∫–æ–º–∞–Ω–¥—ã –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
4. **–ù–∞—Å—Ç—Ä–æ–π CI/CD** - –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–±–æ—Ä–∫–∏ –∏ —Ç–µ—Å—Ç–æ–≤

## –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ —Ç—ã –ø–æ–ª—É—á–∏—à—å:

- üìÅ **–ß–∏—Å—Ç—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É** –ø—Ä–æ–µ–∫—Ç–∞
- üîÑ **–ü—Ä–æ—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** BlackHole  
- ‚öñÔ∏è **–ß–µ—Ç–∫–æ–µ –ª–∏—Ü–µ–Ω–∑–∏—Ä–æ–≤–∞–Ω–∏–µ**
- üõ°Ô∏è **–ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫**
- üè¢ **–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–æ–¥—Ö–æ–¥**

–≠—Ç–æ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏—è –≤ –±—É–¥—É—â–µ–µ –ø—Ä–æ–µ–∫—Ç–∞, –∫–æ—Ç–æ—Ä–∞—è –æ–∫—É–ø–∏—Ç—Å—è —É–∂–µ —á–µ—Ä–µ–∑ –º–µ—Å—è—Ü –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è! 